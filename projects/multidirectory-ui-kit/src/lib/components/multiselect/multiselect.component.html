@let heightLimit = containerHeightLimit();

<div
  class="multiselect-container"
  [style.max-height]="heightLimit ? heightLimit + 'em' : 'unset'"
  [style.overflow-y]="heightLimit ? 'scroll' : 'unset'"
  [style.height]="heightLimit ? 'unset' : ''"
  (keydown)="preventEnterKey($event)"
  (keyup)="onQueryChange($event)"
  [mdDropdownContainer]="menu"
  [openMenuOnClick]="false"
  (click)="onContainerClick($event)"
  #menuContainer
>
  <div class="multiselect-badges">
    @for (d of selectedData(); track d.id) {
      <md-multiselect-badge (badgeClose)="onBadgeClose(d)">{{
        d.badge_title ?? d.title
      }}</md-multiselect-badge>
    }
    <div class="multiselect-input" contenteditable="true" #inputContainer></div>
  </div>
</div>
<md-dropdown-menu tabindex="-1" #menu>
  @for (el of filteredOptions(); track el.id) {
    <div
      class="dropdown-item"
      tabindex="0"
      (keyup)="onOptionKey($event, el)"
      (click)="onElementSelect(el)"
    >
      {{ el.title }}
    </div>
  }
  @if (!filteredOptions() || filteredOptions().length === 0) {
    <div>
      {{ notFoundText() }}
    </div>
  }
</md-dropdown-menu>
