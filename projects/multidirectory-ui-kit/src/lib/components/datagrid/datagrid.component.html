<div class="w-100 h-100 relative scrollable-y">
  <ngx-datatable
    [columnMode]="ColumnMode.force"
    [footerHeight]="hideFooter ? 0 : 36"
    [headerHeight]="headerHeight ? headerHeight : controlPanelRef ? 64 : 32"
    [summaryHeight]="300"
    [rows]="rows"
    tabindex="0"
    [columns]="columns"
    [selected]="selected"
    [selectionType]="SelectionType.multi"
    (activate)="onActivate($event)"
    [externalPaging]="externalPaging"
    [externalSorting]="externalSorting"
    [scrollbarV]="scrollbarV"
    [scrollbarH]="false"
    [count]="count"
    [offset]="offset"
    [limit]="limit"
    [virtualization]="false"
    [ngStyle]="{
      height: stretchHeight ? '100%' : 'auto',
      display: 'block',
    }"
    [rowHeight]="scrollbarV ? 24 : 'auto'"
    (page)="onPageChange()"
    (tableContextmenu)="onTableContextMenu($event)"
    [messages]="{
      emptyMessage: emptyMessage,
    }"
    (focus)="onFocus($event)"
    (keydown)="onKeyDown($event)"
    (resize)="onTableResize()"
    (sort)="onSort($event)"
    #datagrid
  >
    <ng-template ngx-datatable-control-panel>
      <div [ngTemplateOutlet]="controlPanelRef"></div>
    </ng-template>

    <ngx-datatable-footer>
      <ng-template
        ngx-datatable-footer-template
        let-count="count"
        let-offset="offset"
        let-rowCount="count"
        let-pageSize="limit"
        let-selectedCount="selectedCount"
      >
        @if (!scrollbarV) {
          <div class="flex-row justify-end align-center w-100 flex-gap-10 p-4">
            <label class="pr-10">{{ pagerTitle }} </label>
            <md-dropdown
              class="page-size-select"
              [options]="pageSizes"
              [(ngModel)]="limit"
            ></md-dropdown>
            <div>
              {{ offset + 1 }}-{{ offset + limit > count ? count : offset + limit }} {{ fromTitle }}
              {{ count }}
            </div>
          </div>

          <datatable-pager
            style="flex: 1 5 20%"
            class="pager"
            [pagerLeftArrowIcon]="'datatable-icon-left'"
            [pagerRightArrowIcon]="'datatable-icon-right'"
            [pagerPreviousIcon]="'datatable-icon-prev'"
            [pagerNextIcon]="'datatable-icon-skip'"
            [limit]="limit"
            [offset]="offset"
            [count]="count"
            [hidden]="!(count / limit > 1)"
            (change)="grid.onFooterPage($event)"
          >
          </datatable-pager>
        }
      </ng-template>
    </ngx-datatable-footer>
  </ngx-datatable>
</div>
